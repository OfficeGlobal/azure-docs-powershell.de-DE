---
title: Migrieren von Azure PowerShell-Skripts von AzureRM zu Az
description: Hier lernen Sie die Schritte und Tools kennen, mit denen Sie Skripts vom AzureRM-Modul zum neuen Az-Modul migrieren können.
author: sptramer
ms.author: sttramer
manager: carmonm
ms.devlang: powershell
ms.topic: conceptual
ms.date: 05/10/2019
ms.openlocfilehash: 02b39653ebb4aa0f74d2340a7be7b35e08d5e44d
ms.sourcegitcommit: 7275a988f5283edd4721f6bc18a98f2b4e3ad9f9
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/25/2019
ms.locfileid: "66223370"
---
# <a name="migrate-azure-powershell-from-azurerm-to-az"></a><span data-ttu-id="2c418-103">Migrieren von Azure PowerShell von AzureRM zum Az-Modul</span><span class="sxs-lookup"><span data-stu-id="2c418-103">Migrate Azure PowerShell from AzureRM to Az</span></span>

<span data-ttu-id="2c418-104">Das Az-Modul bietet die gleichen Features wie AzureRM, verwendet aber kürzere und konsistentere Cmdlet-Namen.</span><span class="sxs-lookup"><span data-stu-id="2c418-104">The Az module has feature parity with AzureRM, but uses shorter and more consistent cmdlet names.</span></span>
<span data-ttu-id="2c418-105">Für die AzureRM-Cmdlets geschriebene Skripts funktionieren nicht automatisch auch mit dem neuen Modul.</span><span class="sxs-lookup"><span data-stu-id="2c418-105">Scripts written for the AzureRM cmdlets won't automatically work with the new module.</span></span> <span data-ttu-id="2c418-106">Zur Vereinfachung des Übergangs bietet Az Tools, die es Ihnen ermöglichen, Ihre bereits vorhandenen Skripts mit AzureRM auszuführen.</span><span class="sxs-lookup"><span data-stu-id="2c418-106">To make the transition easier, Az offers tools to allow you to run your existing scripts using AzureRM.</span></span> <span data-ttu-id="2c418-107">Eine Migration zu einem neuen Befehlssatz ist immer unangenehm. Dieser Artikel hilft Ihnen jedoch dabei, den Umstieg auf das neue Modul in die Wege zu leiten.</span><span class="sxs-lookup"><span data-stu-id="2c418-107">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the new module.</span></span>

<span data-ttu-id="2c418-108">Die vollständige Liste mit grundlegenden Änderungen zwischen AzureRM und Az finden Sie unter [Vollständige Änderungen von AzureRM zu Az](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="2c418-108">To see the full list of breaking changes between AzureRM and Az, see the [full changes from AzureRM to Az](migrate-az-1.0.0.md).</span></span>

## <a name="ensure-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="2c418-109">Vergewissern, dass vorhandene Skripts mit der neuesten AzureRM-Version funktionieren</span><span class="sxs-lookup"><span data-stu-id="2c418-109">Ensure existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="2c418-110">Überprüfen Sie, welche Versionen von AzureRM auf Ihrem System installiert sind, bevor Sie Migrationsschritte ausführen.</span><span class="sxs-lookup"><span data-stu-id="2c418-110">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span> <span data-ttu-id="2c418-111">So können Sie sicherstellen, dass für Skripts bereits das aktuelle Release verwendet wird, und Sie können ermitteln, welche Versionen von AzureRM deinstalliert werden müssen.</span><span class="sxs-lookup"><span data-stu-id="2c418-111">Doing so allows you to make sure scripts are already running on the latest release, and let you know which versions of AzureRM must be uninstalled.</span></span>

<span data-ttu-id="2c418-112">Führen Sie den folgenden Befehl aus, um zu überprüfen, welche Versionen von AzureRM bei Ihnen installiert sind:</span><span class="sxs-lookup"><span data-stu-id="2c418-112">To check which version(s) of AzureRM you have installed, run the command:</span></span>

```powershell-interactive
Get-InstalledModule -Name AzureRM -AllVersions
```

<span data-ttu-id="2c418-113">Die __aktuellste__ verfügbare Version von AzureRM ist __6.13.1__.</span><span class="sxs-lookup"><span data-stu-id="2c418-113">The __latest__ available release of AzureRM is __6.13.1__.</span></span> <span data-ttu-id="2c418-114">Wenn diese Version nicht installiert ist, müssen Ihre vorhandenen Skripts möglicherweise zusätzlich geändert werden, um mit dem Az-Modul über das hinaus zu arbeiten, was hier und in der [Breaking Changes-Liste](migrate-az-1.0.0.md) beschrieben ist.</span><span class="sxs-lookup"><span data-stu-id="2c418-114">If you don't have this version installed, your existing scripts may need additional modification to work with the Az module beyond what's described here and in the [breaking changes list](migrate-az-1.0.0.md).</span></span>

<span data-ttu-id="2c418-115">Wenn Ihre Skripts nicht mit AzureRM 6.13.1 funktionieren, aktualisieren Sie sie gemäß dem [Leitfaden zur Migration von AzureRM 5.x zu 6.x](/powershell/azure/azurerm/migration-guide.6.0.0).</span><span class="sxs-lookup"><span data-stu-id="2c418-115">If your scripts don't work with AzureRM 6.13.1, update them according to the [AzureRM 5.x to 6.x migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span>
<span data-ttu-id="2c418-116">Wenn Sie eine frühere Version des AzureRM-Moduls verwenden, gibt es für jede Hauptversion Migrationsleitfäden.</span><span class="sxs-lookup"><span data-stu-id="2c418-116">If you use an earlier version of the AzureRM module, there are migration guides available for each major version.</span></span>

## <a name="uninstall-azurerm"></a><span data-ttu-id="2c418-117">Deinstallieren von AzureRM</span><span class="sxs-lookup"><span data-stu-id="2c418-117">Uninstall AzureRM</span></span>

<span data-ttu-id="2c418-118">Es wird nicht garantiert, dass das Az-Modul mit allen bestehenden AzureRM-Installationen in PowerShell 5.1 für Windows kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="2c418-118">The Az module is not guaranteed to be compatible with any existing AzureRM installs in PowerShell 5.1 for Windows.</span></span> <span data-ttu-id="2c418-119">Bevor Sie das Az-Modul installieren, deinstallieren Sie [AzureRM](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span><span class="sxs-lookup"><span data-stu-id="2c418-119">Before you install the Az module, [uninstall AzureRM](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="2c418-120">Wenn Sie nicht bereit sind, das AzureRM-Modul aus Ihrem System zu entfernen, können Sie stattdessen das Az-Modul für [PowerShell Core](/powershell/scripting/install/installing-powershell-core-on-windows) 6.x oder höher installieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-120">If you're not ready to remove the AzureRM module from your system, you can install the Az module for [PowerShell Core](/powershell/scripting/install/installing-powershell-core-on-windows) 6.x or later instead.</span></span> <span data-ttu-id="2c418-121">PowerShell Core und PowerShell 5.1 für Windows verwenden unterschiedliche Modulbibliotheken, sodass keine Konflikte auftreten.</span><span class="sxs-lookup"><span data-stu-id="2c418-121">PowerShell Core and PowerShell 5.1 for Windows use different module libraries, so there will be no conflicts.</span></span> <span data-ttu-id="2c418-122">Sie können in PowerShell Core weiterhin [Aliase](#enable-azurerm-compatibility-aliases) aktivieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-122">You can still [enable aliases](#enable-azurerm-compatibility-aliases) in PowerShell Core.</span></span>

## <a name="install-the-azure-powershell-az-module"></a><span data-ttu-id="2c418-123">Installieren des Az-Moduls von Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="2c418-123">Install the Azure PowerShell Az module</span></span>

<span data-ttu-id="2c418-124">Der erste Schritt besteht darin, das Az-Modul auf Ihrer Plattform zu installieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-124">The first step is to install the Az module on your platform.</span></span> <span data-ttu-id="2c418-125">Wenn Sie Az installieren, ist es ratsam, AzureRM zu deinstallieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-125">When you install Az, it's recommended that you uninstall AzureRM.</span></span> <span data-ttu-id="2c418-126">In den folgenden Schritten erfahren Sie, wie Sie Ihre bereits vorhandenen Skripts weiterhin ausführen und die Kompatibilität mit älteren Cmdlet-Namen sicherstellen können.</span><span class="sxs-lookup"><span data-stu-id="2c418-126">In the following steps, you'll learn how to keep running your existing scripts and enable compatibility for old cmdlet names.</span></span>

<span data-ttu-id="2c418-127">Befolgen Sie zur Installation des Az-Moduls von Azure PowerShell die Anweisungen unter [Installieren des Az-Moduls](install-az-ps.md).</span><span class="sxs-lookup"><span data-stu-id="2c418-127">To install the Azure PowerShell Az module, follow the instructions in [Install the Az module](install-az-ps.md).</span></span>

> [!NOTE]
> <span data-ttu-id="2c418-128">An dieser Stelle sollten Sie vielleicht das im Az-Modul bereitgestellte Cmdlet [Uninstall-AzureRM](/powershell/module/az.accounts/uninstall-azurerm) ausführen, nur um sicherzustellen, dass alle Versionen von AzureRM deinstalliert wurden und somit keine Konflikte verursachen.</span><span class="sxs-lookup"><span data-stu-id="2c418-128">At this point, you might want to run the [Uninstall-AzureRM](/powershell/module/az.accounts/uninstall-azurerm) cmdlet provided in the Az module, just to make sure that all versions of AzureRM have been uninstalled and won't cause conflicts.</span></span>

## <a name="enable-azurerm-compatibility-aliases"></a><span data-ttu-id="2c418-129">Aktivieren von AzureRM-Kompatibilitätsaliasen</span><span class="sxs-lookup"><span data-stu-id="2c418-129">Enable AzureRM compatibility aliases</span></span>

<span data-ttu-id="2c418-130">Wenn Sie AzureRM deinstalliert haben und Ihre Skripts mit der neuesten Version von AzureRM funktionieren, ist der nächste Schritt das Aktivieren des Kompatibilitätsmodus für das Az-Modul.</span><span class="sxs-lookup"><span data-stu-id="2c418-130">With AzureRM uninstalled and your scripts working with the latest AzureRM version, the next step is to enable the compatibility mode for the Az module.</span></span> <span data-ttu-id="2c418-131">Die Kompatibilität wird mithilfe des folgenden Befehls aktiviert:</span><span class="sxs-lookup"><span data-stu-id="2c418-131">Compatibility is enabled with the command:</span></span>

```powershell-interactive
Enable-AzureRmAlias -Scope CurrentUser
```

<span data-ttu-id="2c418-132">Aliase ermöglichen die Verwendung alter Cmdlet-Namen bei installiertem Az-Modul.</span><span class="sxs-lookup"><span data-stu-id="2c418-132">Aliases enable the ability to use old cmdlet names with the Az module installed.</span></span> <span data-ttu-id="2c418-133">Diese Aliase werden in das Profil für den ausgewählten Bereich geschrieben.</span><span class="sxs-lookup"><span data-stu-id="2c418-133">These aliases are written to the profile for the selected scope.</span></span> <span data-ttu-id="2c418-134">Sollte kein Profil vorhanden sein, wird eines erstellt.</span><span class="sxs-lookup"><span data-stu-id="2c418-134">If no profile exists, one is created.</span></span>
<span data-ttu-id="2c418-135">Wenn Sie einen `-Scope` verwenden, der umfangreicher als `CurrentUser` ist, sind die entsprechenden Berechtigungen erforderlich, um die entsprechende Profildatei zu erstellen oder zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-135">When using a `-Scope` broader than `CurrentUser`, the appropriate permissions are required to create or update the corresponding profile file.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2c418-136">__Nur__ Cmdlet-Namen werden mit einem Alias versehen – dies gilt nicht für Modulnamen!</span><span class="sxs-lookup"><span data-stu-id="2c418-136">__Only__ cmdlet names are aliased - module names aren't!</span></span> <span data-ttu-id="2c418-137">Wenn Sie `#Requires`, `Import-Module`, Abhängigkeitslisten in einer `.psd1` oder vollqualifizierte Cmdlet-Namen verwenden, stellen Sie sicher, dass Sie diese an dieser Stelle migrieren, indem Sie dem in der [Breaking Changes-Liste](migrate-az-1.0.0.md) zu Modulnamen beschriebenen Prozess folgen.</span><span class="sxs-lookup"><span data-stu-id="2c418-137">If you're using `#Requires`, `Import-Module`, dependency lists in a `.psd1`, or fully-qualified cmdlet names, make sure that you migrate them at this point by following the process outlined in the [breaking changes list](migrate-az-1.0.0.md) regarding module names.</span></span>

> [!WARNING]
>
> <span data-ttu-id="2c418-138">Sie können für diesen Befehl zwar einen anderen Bereich (`-Scope`) verwenden, aber dies wird nicht empfohlen.</span><span class="sxs-lookup"><span data-stu-id="2c418-138">You can use a different `-Scope` for this command, but it's not recommended.</span></span> <span data-ttu-id="2c418-139">Da Aliase in das Benutzerprofil für den ausgewählten Bereich geschrieben werden, empfiehlt es sich, sie auf einen möglichst kleinen Bereich zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="2c418-139">Aliases are written to the user profile for the selected scope, so keep enabling them to as limited a scope as possible.</span></span> <span data-ttu-id="2c418-140">Eine systemweite Aktivierung von Aliasen kann zu Problemen für andere Benutzer führen, die AzureRM in ihrem lokalen Bereich installiert haben.</span><span class="sxs-lookup"><span data-stu-id="2c418-140">Enabling aliases system-wide can cause issues for other users who have AzureRM installed in their local scope.</span></span>

<span data-ttu-id="2c418-141">Führen Sie Ihre Skripts nach der Aktivierung des Aliasmodus erneut aus, um sich zu vergewissern, dass sie weiterhin wie erwartet funktionieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-141">Once the alias mode is enabled, run your scripts again to confirm that they still function as expected.</span></span>
<span data-ttu-id="2c418-142">Einige Parameternamen wurden geändert, hinzugefügt oder für das Az-Modul vorgeschrieben.</span><span class="sxs-lookup"><span data-stu-id="2c418-142">Some parameter names have been changed, added, or made required by the Az module.</span></span> <span data-ttu-id="2c418-143">Die Ausgabetypen von Cmdlets wurden möglicherweise ebenfalls geändert.</span><span class="sxs-lookup"><span data-stu-id="2c418-143">Output types of cmdlets may have changed as well.</span></span> <span data-ttu-id="2c418-144">Diese Änderungen werden in der [Breaking Changes-Liste](migrate-az-1.0.0.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="2c418-144">These changes are detailed in the [breaking changes list](migrate-az-1.0.0.md).</span></span>

## <a name="update-cmdlets-modules-and-parameters"></a><span data-ttu-id="2c418-145">Aktualisieren von Cmdlets, Modulen und Parametern</span><span class="sxs-lookup"><span data-stu-id="2c418-145">Update cmdlets, modules, and parameters</span></span>

<span data-ttu-id="2c418-146">Wenn Skripts aktualisiert wurden und mit Aliasen ausgeführt werden, können Sie sich die Zeit nehmen, sie zu aktualisieren, um die neuen Cmdlets zu verwenden und andere Änderungen zu nutzen, z. B. neue Features.</span><span class="sxs-lookup"><span data-stu-id="2c418-146">With scripts updated and running under aliases, you can take your time to update them to use the new cmdlets and take advantage of other changes like new features.</span></span> <span data-ttu-id="2c418-147">Für die meisten Skripts müssen Sie nur die Cmdlet-Namen gemäß dem [neuen Cmdlet-Namensschema in Az](migrate-az-1.0.0.md#cmdlet-noun-prefix-changes) aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-147">For most scripts, you will only need to update cmdlet names, [following the new cmdlet naming scheme in Az](migrate-az-1.0.0.md#cmdlet-noun-prefix-changes).</span></span> <span data-ttu-id="2c418-148">Es gibt möglicherweise auch einige andere vorzunehmende Änderungen, damit die Skripts gemäß ihrer Aufgabe und der verwendeten Azure PowerShell-Features funktionieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-148">There may also be some other changes that you need to make in order to have your scripts work, depending on what they do and which Azure PowerShell features they take advantage of.</span></span>

<span data-ttu-id="2c418-149">So wurden z. B. die [Blob Storage-Cmdlets](migrate-az-1.0.0.md#azstorage-previously-azurestorage-and-azurermstorage) vollständig überarbeitet, um ein neues asynchrones Modell zu verwenden, sodass die Skripts, die diese Cmdlets verwenden, einen höheren Aufwand für die Aktualisierung erfordern als solche, bei denen die einzigen relevanten Änderungen die Cmdlet-Namen darstellen.</span><span class="sxs-lookup"><span data-stu-id="2c418-149">For example, the [Blob Storage cmdlets](migrate-az-1.0.0.md#azstorage-previously-azurestorage-and-azurermstorage) have been completely reworked to use a new asynchronous model, so scripts using them will take more work to update than those where the only relevant changes were cmdlet names.</span></span>

<span data-ttu-id="2c418-150">Auch wenn Sie bis zu diesem Zeitpunkt nur kleine, einfache Änderungen an Ihren Skripts vornehmen mussten – oder sie sogar ohne zusätzliche Änderungen funktionieren, wenn Aliase aktiviert sind – lesen Sie die [vollständige Liste der Breaking Changes in Az 1.0.0](migrate-az-1.0.0.md), um sicherzustellen, dass Sie sich nicht auf ein „transparentes“ Verhalten der Aliase verlassen, das verschwinden könnte, nachdem Sie Cmdlet-Namen geändert und Aliase deaktiviert haben.</span><span class="sxs-lookup"><span data-stu-id="2c418-150">Even if you've only had to make small, simple changes to your scripts up to this point - or they even work without additional modification when aliases are enabled -  read the [full list of breaking changes in Az 1.0.0](migrate-az-1.0.0.md) to make sure that you're not relying on 'transparent' behavior of aliases which could disappear after you change cmdlet names and disable aliases.</span></span>

## <a name="disable-aliases"></a><span data-ttu-id="2c418-151">Deaktivieren von Aliasen</span><span class="sxs-lookup"><span data-stu-id="2c418-151">Disable aliases</span></span>

<span data-ttu-id="2c418-152">Sobald Sie die Migration abgeschlossen haben und nicht mehr auf das Aliasverhalten angewiesen sind, wird empfohlen, Aliase zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="2c418-152">Once you've completed your migration and are no longer relying on aliasing behavior, it's recommended that you disable aliases.</span></span> <span data-ttu-id="2c418-153">Dies erfolgt mit dem Cmdlet [Disable-AzureRmAlias](/powershell/module/az.accounts/disable-azurermalias).</span><span class="sxs-lookup"><span data-stu-id="2c418-153">This is done with the [Disable-AzureRmAlias](/powershell/module/az.accounts/disable-azurermalias) cmdlet.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2c418-154">Wenn Sie dieses Cmdlet ausführen, __stellen Sie sicher__, dass Sie es für jeden `-Scope` aufrufen, für den `Enable-AzureRmAlias` aufgerufen wurde, ansonsten kann es auf Ihrem System noch Skripts geben, die sich auf das Aliasverhalten verlassen.</span><span class="sxs-lookup"><span data-stu-id="2c418-154">When running this cmdlet, __make sure__ that you invoke it for each `-Scope` that `Enable-AzureRmAlias` was invoked for, otherwise there may still be scripts on your system relying on the aliasing behavior.</span></span>
